<div ng-controller="SingleItemController" class="container container-page container-eee">

    <div class="row item-heading">

        <div class="col-xs-12">

            <h5>{{ item.title }}</h5>

            <div class="item-prices pull-right" ng-if="item.has_price">

                <em><s>was {{ item.get_compare_at_price_display }}</s></em>

                <b>{{ item.get_min_price_display }}</b>

            </div>

        </div>

        <div class="col-xs-12">

            <md-button ui-sref="app.userProfile({userId: item.user_id, userSlug: item.user_name})" class="md-flat md-mini md-warn">
                <md-icon class='mi'>account_box</md-icon> {{ item.user_name }}
            </md-button>

            <ul class="item-details pull-right list-unstyled">

                <li title="Views">
                    <i class='mi'>remove_red_eye</i>
                    <span>{{ item.views_count }}</span>

                </li>

                <li title="Likes">
                    <i class='mi'>thumb_up</i>
                    <span>{{ item.voting_score }}</span>

                </li>

                <li title="Date">
                    <i class='mi'>hourglass_empty</i>
                    <span>{{ item.updated | date }}</span>

                </li>

            </ul>

        </div>

    </div>

    <div class="row item-body">

        <div class="col-md-7 image-container">

            <div class="image-preview" ng-if="item.has_images">

                <img ng-src='{{ mainImageUrl }}'>

            </div>

            <div class="image-list" ng-if="item.has_images">

                <div class="image" ng-repeat="image in item.images">
                    <img ng-src="{{ image.tiny }}" ng-click="SetImagePreview( image.standard )">
                </div>

            </div>

            <div class="description panel panel-default">

                <div class="panel-heading">
                    <md-icon class="mi">info</md-icon> Description
                </div>

                <div class="panel-body" ng-bind-html="item.description"></div>
            </div>

        </div>

        <div class="col-md-5">

            <div class="panel panel-default">

                <div class="panel-heading">
                    <md-icon class="mi">label_outline</md-icon> Tags
                </div>

                <div class="panel-body">

                    <div class="tag-list" layout='row' layout-align="space-around center">

                        <div class="tag-list" layout='row' layout-align="space-around center">
                            <tagool tag="tag" ng-repeat='tag in item.tags'></tagool>
                        </div>

                    </div>

                </div>

            </div>

            <div class="panel panel-default">

                <div class="panel-heading">
                    <md-icon class="mi">question_answer</md-icon> Comments
                    <span class="label label-danger pull-right">{{ item.comments_count }}</span>
                </div>

                <div class="panel-body">

                    <form name="form" ng-submit="addComment(form, comment)">
                        <md-input-container class="md-block" style="margin: -10px 0;">
                            <label>Enter comment...</label>
                            <input type="text"
                                   name="comment"
                                   ng-model="comment.text"
                                   ng-change="checkAuth()"
                                   ng-required="true"
                                   required>
                        </md-input-container>
                    </form>

                    <ul class="comment-list list-group">

                        <li class="comment list-group-item" ng-repeat="comment in item.comments">
                            <a ui-sref="app.userProfile({'userId': '{{ comment.user.id }}', 'userSlug': '{{ comment.user.slug }}'})" ng-show="!comment.user.url">
                                <small>{{ comment.user.name }}: </small>
                            </a>
                            <a href="{{ comment.user.url }}" ng-show="comment.user.url">
                                <small>{{ comment.user.name }}: </small>
                            </a>
                            {{ comment.comment }}
                            <em class="pull-right"><small>{{ comment.get_created_since }} ago</small></em>
                        </li>

                    </ul>

                </div>

            </div>

        </div>

    </div>

</div>

<!--
<ion-view view-title="{{ item.title }}">
    <ion-nav-title>{{ item.title }}</ion-nav-title>
    <ion-content>
        <div class="list card">
            <item item="item" image="'multi'" up-vote="upVote(item)" down-vote="downVote(item)" add-comment="addComment"></item>
        </div>

        <form name="form" ng-submit="addComment(form, comment)">
            <div class="bar item-input-inset">
                <label class="item-input-wrap full">
                    <input
                        class="full"
                        type="text"
                        name="comment"
                        ng-model="comment.text"
                        placeholder="{{ 'Comment...'|translate }}"
                        ng-change="checkAuth()"
                        ng-required="true"
                        required>
                </label>
            </div>
        </form>

        <ion-list>
            <ion-item class="item item-avatar" ng-repeat="comment in item.comments">
                <img ng-src="{{ comment.user.get_gravatar[64] }}">
                <h2><a href="#!/app/account/user-profile/{{ comment.user.id }}/">{{ comment.user.get_short_name }}</a></h2>
                <p>
                    {{ comment.comment }}
                    <br>
                    {{ comment.created | timesince }} <translate>ago</translate>
                </p>

                <ion-option-button
                    ng-if="comment.user.id === user.id"
                    class="button-assertive ion-trash-a"
                    ng-click="deleteComment(comment)">
                </ion-option-button>

                <ion-option-button
                    ng-if="comment.user.id === user.id"
                    class="button-dark ion-edit"
                    ng-click="editComment(comment)">
                </ion-option-button>
            </ion-item>
        </ion-list>

        <div class="amir-dialog anime" ng-show="isEditing">
            <div class="item item-input-inset">
                <label class="item-input-wrapper">
                    <input type="text" ng-model="editInput" placeholder="Edit comment..." style="width: 100%">
                </label>
                <button class="button button-outline button-positive" ng-click="editComment(comment)">
                    <i class="ion-checkmark-round"></i>
                </button>
            </div>
        </div>

        <br><br>

    </ion-content>
</ion-view>
 -->
